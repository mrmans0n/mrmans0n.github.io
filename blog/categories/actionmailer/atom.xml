<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">

  <title><![CDATA[Category: actionmailer | Nacho Lopez]]></title>
  <link href="http://mrmans0n.github.io/blog/categories/actionmailer/atom.xml" rel="self"/>
  <link href="http://mrmans0n.github.io/"/>
  <updated>2013-08-16T13:56:32+02:00</updated>
  <id>http://mrmans0n.github.io/</id>
  <author>
    <name><![CDATA[Nacho Lopez]]></name>
    <email><![CDATA[nacho@nlopez.io]]></email>
  </author>
  <generator uri="http://octopress.org/">Octopress</generator>

  
  <entry>
    <title type="html"><![CDATA[ActionMailer with GMail problem and its workaround]]></title>
    <link href="http://mrmans0n.github.io/blog/2012/07/31/actionmailer-with-gmail-problem-and-its-workaround/"/>
    <updated>2012-07-31T22:00:00+02:00</updated>
    <id>http://mrmans0n.github.io/blog/2012/07/31/actionmailer-with-gmail-problem-and-its-workaround</id>
    <content type="html"><![CDATA[<p>I had a little problem today with one of my managed sites, one that was using
<a href="http://api.rubyonrails.org/classes/ActionMailer/Base.html">ActionMailer</a> for sending mails in a
Contact Us form using GMail’s
SMTP.</p>

<p>But reading server logs wasn’t very enlightening.</p>

<p>$ tail log/production.log
Completed 500 Internal Server Error in 533ms
Net::SMTPAuthenticationError (535-5.7.1 Please log in with your web browser and then try again. Learn more at
):
app/controllers/contact_controller.rb:11:in `create'</p>

<p>And that was all. That line of code was a simple…</p>

<p>NotificationsMailer.new_message(@message).deliver</p>

<p>…so I investigated a lot of workarounds, double-checked my configurations and everything seemed perfect.</p>

<p>But then it came to me. I logged to the account that was being used to send all the mails, and this was on the inbox.</p>

<blockquote><p>User,</p></blockquote>

<p>Someone recently tried to use an application to sign in to your Google Account, <a href="&#x6d;&#97;&#105;&#108;&#x74;&#x6f;&#58;&#x6f;&#x75;&#114;&#x2e;&#x73;&#x65;&#x6e;&#100;&#x65;&#x72;&#x2e;&#x65;&#x6d;&#x61;&#105;&#x6c;&#64;&#x67;&#x6d;&#97;&#x69;&#x6c;&#x2e;&#99;&#111;&#x6d;&#x2e;">&#111;&#117;&#114;&#x2e;&#115;&#x65;&#x6e;&#x64;&#101;&#114;&#46;&#x65;&#x6d;&#x61;&#105;&#108;&#x40;&#103;&#109;&#97;&#105;&#x6c;&#46;&#99;&#111;&#x6d;&#x2e;</a> We prevented the sign-in attempt in case this was a hijacker trying to access your account. Please review the details of the sign-in attempt:</p>

<p>Sunday, July 29, 2012 6:55:17 PM
GMT</p>

<p>IP Address: 123.456.789.101</p>

<p>Location: Paris, France</p>

<p>If you do not recognize this sign-in attempt, someone else might be trying to access your account. You should sign in to your account and reset your password immediately. Find out how at <a href="http://support.google.com/accounts?p=reset_pw">http://support.google.com/accounts?p=reset_pw</a></p>

<p>If this was you, and you want to give this application access to your account, complete the troubleshooting steps listed at <a href="http://support.google.com/mail?p=client_login">http://support.google.com/mail?p=client_login</a></p>

<p>Sincerely,</p>

<p>The Google Accounts Team</p>

<p>I investigated a bit and realized that my account wasn’t using 2-step verification.
<strong>So I configured the account with 2-step verification and created a specific password for my web app</strong>
, changed it in my configuration and everything worked again flawlessly.</p>

<p>PD: If you are wondering what’s my configuration in config/application.rb, here it goes, in case it helps you.</p>
]]></content>
  </entry>
  
</feed>
